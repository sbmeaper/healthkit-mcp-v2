{
  "llm": {
    "provider": "ollama",
    "model": "qwen2.5-coder:7b",
    "endpoint": "http://localhost:11434/api/generate"
  },
  "database": {
    "parquet_path": "/Users/scottbartlow/PycharmProjects/healthkit_export_ripper_one_table/health.parquet",
    "max_retries": 3
  },
  "semantic_layer": {
    "auto_queries": [
      "SELECT DISTINCT type FROM '{parquet_path}' ORDER BY type",
      "SELECT MIN(start_date) as min_date, MAX(start_date) as max_date FROM '{parquet_path}'",
      "SELECT type, COUNT(*) as row_count FROM '{parquet_path}' GROUP BY type ORDER BY row_count DESC",
      "SELECT DISTINCT type, value_category FROM '{parquet_path}' WHERE value_category IS NOT NULL ORDER BY type, value_category"
    ],
    "static_context": [
      "DATABASE: DuckDB (not SQLite, not PostgreSQL)",

      "DATE HANDLING - dates are stored as VARCHAR in 'YYYY-MM-DD HH:MM:SS' format:",
      "  - Cast to timestamp: CAST(start_date AS TIMESTAMP)",
      "  - Extract year: YEAR(CAST(start_date AS TIMESTAMP))",
      "  - Extract month: MONTH(CAST(start_date AS TIMESTAMP))",
      "  - Filter by year: WHERE YEAR(CAST(start_date AS TIMESTAMP)) = 2024",
      "  - Filter by month: WHERE start_date >= '2024-11-01' AND start_date < '2024-12-01'",

      "DURATION CALCULATION - to get duration between start_date and end_date:",
      "  - Minutes: DATE_DIFF('minute', CAST(start_date AS TIMESTAMP), CAST(end_date AS TIMESTAMP))",
      "  - Hours: DATE_DIFF('minute', CAST(start_date AS TIMESTAMP), CAST(end_date AS TIMESTAMP)) / 60.0",
      "  - DO NOT use julianday() or strftime() - those are SQLite, not DuckDB",

      "SLEEP QUERIES - type='SleepAnalysis' uses value_category, NOT value:",
      "  - Sleep stages: AsleepCore, AsleepDeep, AsleepREM, AsleepUnspecified, Awake, InBed",
      "  - Actual sleep = AsleepCore + AsleepDeep + AsleepREM (exclude Awake, InBed)",
      "  - Sleep duration example: SELECT SUM(DATE_DIFF('minute', CAST(start_date AS TIMESTAMP), CAST(end_date AS TIMESTAMP))) / 60.0 AS hours_slept FROM health_data WHERE type = 'SleepAnalysis' AND value_category IN ('AsleepCore', 'AsleepDeep', 'AsleepREM')",

      "AGGREGATION RULES:",
      "  - Steps, distance, calories: use SUM(value), each row is a partial measurement",
      "  - Heart rate, weight: use AVG(value) for averages, or just value for point-in-time",
      "  - Counting events: use COUNT(*)",

      "WORKOUT QUERIES - type starts with 'Workout' (e.g., 'WorkoutWalking', 'WorkoutCycling'):",
      "  - Has duration_min, distance_km, energy_kcal columns",
      "  - Example: SELECT SUM(duration_min) FROM health_data WHERE type = 'WorkoutWalking'",

      "STRING ESCAPING: double apostrophes, not backslash: 'Scott''s Watch'"
    ]
  }
}