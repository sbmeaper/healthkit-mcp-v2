{
  "llm": {
    "provider": "ollama",
    "model": "qwen2.5:7b",
    "endpoint": "http://localhost:11434/api/generate"
  },
  "database": {
    "parquet_path": "/Users/scottbartlow/PycharmProjects/healthkit_export_ripper_one_table/health.parquet",
    "max_retries": 3
  },
  "semantic_layer": {
    "auto_queries": [
      "SELECT DISTINCT type FROM '{parquet_path}' ORDER BY type",
      "SELECT MIN(start_date) as min_date, MAX(start_date) as max_date FROM '{parquet_path}'",
      "SELECT type, COUNT(*) as row_count FROM '{parquet_path}' GROUP BY type ORDER BY row_count DESC",
      "SELECT DISTINCT type, value_category FROM '{parquet_path}' WHERE value_category IS NOT NULL ORDER BY type, value_category"
    ],
    "static_context": [
      "All HealthKit data is in a single table. The 'type' column indicates the measurement type.",
      "Dates are stored as strings in 'YYYY-MM-DD HH:MM:SS' format. Use date functions for filtering.",
      "The 'value' column contains numeric measurements. The 'value_category' column contains categorical values (like sleep stages).",
      "When asked 'how many' for metrics like steps, calories, or distance, use SUM(value) not COUNT(*). Each row is a measurement interval, not a single unit.",
      "In DuckDB, escape apostrophes in strings by doubling them: 'Scott''s Watch' not 'Scott\\'s Watch'.",
      "For sleep data: 'value_category' contains sleep stages: AsleepCore, AsleepDeep, AsleepREM, AsleepUnspecified, Awake, InBed. To calculate actual sleep time, sum duration of AsleepCore + AsleepDeep + AsleepREM rows only. Calculate duration as (end_date - start_date).",
      "For AppleStandHour: 'value_category' is either 'Stood' or 'Idle'.",
      "To calculate duration between dates: use DATE_DIFF('minute', CAST(start_date AS TIMESTAMP), CAST(end_date AS TIMESTAMP)) to get minutes between two date strings.",
      "Multiple apps often sync with HealthKit and write duplicate records for the same measurement. For discrete metrics like BodyMass, BloodPressure, or similar once-daily measurements, deduplicate by grouping on DATE and taking AVG(value) per day. For continuous metrics like StepCount or HeartRate, multiple readings per day are expected and valid — do not deduplicate those.",
      "When filtering or grouping by year, use explicit conditions for each year (e.g., start_date LIKE '2024-%' or SUBSTR(start_date, 1, 4) = '2024'). Never use ELSE clauses to bucket remaining records into a year — this incorrectly captures data from other years."
    ]
  }
}